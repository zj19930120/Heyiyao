<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¸åŒ»è¯äº§ä¸šå¤§å±æ•°æ®å±•ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #fff;
            overflow-y: auto; /* å…è®¸å‚ç›´æ»šåŠ¨ */
            min-height: 100vh; /* æœ€å°é«˜åº¦100vh */
        }

        /* ç²’å­èƒŒæ™¯ */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* ä¸»å®¹å™¨ */
        .dashboard-container {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 75vh; /* è¿›ä¸€æ­¥ç¼©çŸ­é«˜åº¦åˆ°75vhï¼Œç•Œé¢æ›´ç´§å‡‘ */
            padding: 10px; /* å‡å°padding */
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: auto 1fr;
            gap: 10px; /* å‡å°gap */
            align-items: stretch; /* è®©æ‰€æœ‰åˆ—æ‹‰ä¼¸åˆ°ç›¸åŒé«˜åº¦ */
        }

        /* æ ‡é¢˜æ  */
        .header {
            grid-column: 1 / -1;
            text-align: center;
            padding: 15px; /* å‡å°padding */
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.3);
        }

        .header h1 {
            font-size: 36px; /* å‡å°å­—ä½“ */
            font-weight: bold;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(102, 126, 234, 0.5);
            margin-bottom: 8px; /* å‡å°é—´è· */
        }

        .header .subtitle {
            font-size: 14px; /* å‡å°å­—ä½“ */
            color: #a0aec0;
            letter-spacing: 2px;
        }

        .header .time {
            font-size: 13px; /* å‡å°å­—ä½“ */
            color: #4ade80;
            margin-top: 6px; /* å‡å°é—´è· */
            font-family: 'Courier New', monospace;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(30, 30, 60, 0.6);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 15px;
            padding: 12px; /* å‡å°padding */
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }

        .card-title {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        /* å¼¹æ€§å¡ç‰‡ - è‡ªåŠ¨å¡«å……å‰©ä½™ç©ºé—´ */
        .flex-card {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0; /* é‡è¦ï¼šå…è®¸flexå­å…ƒç´ ç¼©å° */
        }

        .flex-card .scroll-list,
        .flex-card .data-stream {
            flex: 1;
            max-height: 200px; /* å‡å°é«˜åº¦ï¼Œè®©æ»šåŠ¨æ›´æ˜æ˜¾ */
            overflow-y: auto;
            min-height: 0; /* é‡è¦ï¼šå…è®¸flexå­å…ƒç´ ç¼©å° */
        }

        /* åœ°å›¾å¼¹æ€§å¡ç‰‡ç‰¹æ®Šå¤„ç† */
        .flex-card #china-map {
            flex: 1;
            height: auto;
            min-height: 0;
        }

        /* å·¦ä¾§åˆ— */
        .left-column {
            grid-row: 2;
            display: flex;
            flex-direction: column;
            gap: 15px;
            height: 100%; /* ä½¿ç”¨heightè®©åˆ—æ‹‰ä¼¸åˆ°ç›¸åŒé«˜åº¦ */
            overflow-y: visible; /* æ”¹ä¸ºvisibleï¼Œä¸æ»šåŠ¨æ•´ä¸ªåˆ—ï¼Œé¿å…é®æŒ¡é¡¶éƒ¨æ¿å— */
        }

        /* å³ä¾§åˆ— */
        .right-column {
            grid-row: 2;
            display: flex;
            flex-direction: column;
            gap: 15px;
            height: 100%; /* ä½¿ç”¨heightè®©åˆ—æ‹‰ä¼¸åˆ°ç›¸åŒé«˜åº¦ */
            overflow-y: visible; /* æ”¹ä¸ºvisibleï¼Œè®©å†…å®¹è‡ªç„¶å±•å¼€ */
        }

        /* ä¸­é—´åœ°å›¾åŒºåŸŸ */
        .map-container {
            grid-row: 2;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%; /* ä½¿ç”¨heightè®©åˆ—æ‹‰ä¼¸åˆ°ç›¸åŒé«˜åº¦ */
        }

        #china-map {
            width: 100%;
            height: 100%; /* ä½¿ç”¨100%é«˜åº¦ï¼Œé…åˆflex-cardè‡ªåŠ¨å¡«å…… */
            position: relative; /* ç¡®ä¿å®šä½æ­£ç¡® */
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%); /* æ·±è‰²ç§‘æŠ€èƒŒæ™¯ */
            /* ç§‘æŠ€æ„Ÿç½‘æ ¼èƒŒæ™¯ */
            background-image:
                linear-gradient(rgba(102, 126, 234, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(102, 126, 234, 0.1) 1px, transparent 1px),
                linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            background-size: 50px 50px, 50px 50px, 100% 100%;
        }



        /* ç»Ÿè®¡æ•°å­—å¡ç‰‡ */
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(5px);
        }

        .stat-label {
            font-size: 14px;
            color: #a0aec0;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, #4ade80 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-unit {
            font-size: 14px;
            color: #a0aec0;
            margin-left: 5px;
        }

        /* æ»šåŠ¨åˆ—è¡¨ */
        .scroll-list {
            max-height: 200px; /* è°ƒæ•´ä¸º200pxï¼Œç¼©çŸ­é«˜åº¦ */
            overflow-y: auto;
            padding-right: 10px;
            scroll-behavior: smooth;
        }

        .scroll-list::-webkit-scrollbar {
            width: 6px;
        }

        .scroll-list::-webkit-scrollbar-track {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 3px;
        }

        .scroll-list::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.5);
            border-radius: 3px;
        }

        /* å·¦å³åˆ—æ»šåŠ¨æ¡æ ·å¼ */
        .left-column::-webkit-scrollbar,
        .right-column::-webkit-scrollbar {
            width: 4px;
        }

        .left-column::-webkit-scrollbar-track,
        .right-column::-webkit-scrollbar-track {
            background: transparent;
        }

        .left-column::-webkit-scrollbar-thumb,
        .right-column::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.3);
            border-radius: 2px;
        }

        .left-column::-webkit-scrollbar-thumb:hover,
        .right-column::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.5);
        }

        .list-item {
            padding: 8px;
            background: rgba(102, 126, 234, 0.05);
            border-left: 3px solid #667eea;
            margin-bottom: 6px;
            border-radius: 5px;
            font-size: 14px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* æ•°å­—è·³åŠ¨åŠ¨ç”» */
        .count-up {
            display: inline-block;
            animation: countUp 2s ease-out;
        }

        @keyframes countUp {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(102, 126, 234, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 1s ease;
        }

        /* å›¾æ ‡æ ·å¼ */
        .icon {
            font-size: 24px;
            margin-right: 10px;
        }

        /* å®æ—¶æ•°æ®æµ */
        .data-stream {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #4ade80;
            line-height: 1.8;
            max-height: 180px; /* å¢åŠ é«˜åº¦ï¼Œè®©åœ°å›¾ç›¸å¯¹å˜å° */
            overflow-y: auto;
        }

        /* å›ºå®šé«˜åº¦å¡ç‰‡ - ç”¨äºå®æ—¶æ•°æ® */
        .fixed-height-card {
            flex: 0 0 auto; /* ä¸æ‹‰ä¼¸ï¼Œä¿æŒå›ºå®š */
        }

        /* é—ªçƒæ•ˆæœ */
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .blink {
            animation: blink 1.5s ease-in-out infinite;
        }

        /* è‡ªåŠ¨æ»šåŠ¨åŠ¨ç”» */
        @keyframes autoScroll {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-50%);
            }
        }

        .auto-scroll-container {
            animation: autoScroll 30s linear infinite;
        }

        .auto-scroll-container:hover {
            animation-play-state: paused;
        }

        /* è¿”å›ä¸»é¡µæŒ‰é’® */
        .back-home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 9999;
            background: rgba(255, 255, 255, 0.95);
            color: #667eea;
            border: 2px solid rgba(102, 126, 234, 0.3);
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }

        .back-home-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.5);
        }

        .back-home-btn::before {
            content: 'â†';
            font-size: 20px;
        }

        /* è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        /* é™æ€åœ°å›¾æ ‡è®°ç‚¹æ ·å¼ */
        .static-marker {
            position: absolute;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .marker-dot {
            width: 25px;
            height: 25px;
            background: var(--marker-color, #667eea);
            border-radius: 50%;
            box-shadow:
                0 0 20px var(--marker-color, #667eea),
                0 0 40px var(--marker-color, #667eea),
                0 0 60px rgba(255, 255, 255, 0.3);
            animation: markerPulse 2s ease-in-out infinite;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        .marker-dot.marker-small {
            width: 18px;
            height: 18px;
        }

        .marker-label {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            color: #fff;
            font-size: 12px;
            font-weight: 500;
            background: rgba(0, 0, 0, 0.85);
            padding: 8px 12px;
            border-radius: 6px;
            line-height: 16px;
            text-align: center;
            pointer-events: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }

        @keyframes markerPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
        }

        /* æ ‡è®°ç‚¹æ‚¬åœæ•ˆæœ */
        .static-marker:hover .marker-dot {
            animation: none;
            transform: scale(1.3);
            box-shadow:
                0 0 30px var(--marker-color, #667eea),
                0 0 60px var(--marker-color, #667eea),
                0 0 90px rgba(255, 255, 255, 0.5);
        }

        .static-marker:hover .marker-label {
            background: rgba(0, 0, 0, 0.9);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <button class="back-home-btn" onclick="window.location.href='index.html'">
        è¿”å›ä¸»é¡µ
    </button>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particles-js"></div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="dashboard-container">
        <!-- æ ‡é¢˜æ  -->
        <div class="header">
            <h1>ğŸ”¬ æ ¸åŒ»è¯äº§ä¸šå…¨æ™¯æ•°æ®å¤§å±</h1>
            <div class="subtitle">NUCLEAR MEDICINE INDUSTRY DATA DASHBOARD</div>
            <div class="time" id="currentTime"></div>
        </div>

        <!-- å·¦ä¾§åˆ— -->
        <div class="left-column">
            <!-- å…¨å›½å¸ƒå±€ç»Ÿè®¡ -->
            <div class="card">
                <div class="card-title">ğŸ“ å››å·çœæ ¸åŒ»ç–—äº§ä¸šå¸ƒå±€</div>
                <div class="stat-item">
                    <span class="stat-label">å¸ƒå±€åŸå¸‚</span>
                    <div>
                        <span class="stat-value count-up" data-target="4">0</span>
                        <span class="stat-unit">ä¸ª</span>
                    </div>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å‘å±•æ ¼å±€</span>
                    <div>
                        <span class="stat-value" style="font-size: 16px;">ä¸€é“¾å››æ</span>
                    </div>
                </div>
            </div>

            <!-- é‡ç‚¹çœä»½åŸå¸‚åˆ—è¡¨ -->
            <div class="card flex-card">
                <div class="card-title">ğŸ™ï¸ æ ¸åŒ»è¯é‡ç‚¹å¸ƒå±€åŸå¸‚</div>
                <div class="scroll-list" id="cityList">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- å®æ—¶æ•°æ® -->
            <div class="card flex-card">
                <div class="card-title">ğŸ“¡ å®æ—¶äº§ä¸šæ•°æ®</div>
                <div class="data-stream" id="dataStream">
                    <div class="pulse">â–º ç³»ç»Ÿæ­£åœ¨åŠ è½½å®æ—¶æ•°æ®...</div>
                </div>
            </div>
        </div>

        <!-- ä¸­é—´åœ°å›¾åŒºåŸŸ -->
        <div class="map-container">
            <!-- åœ°å›¾å¡ç‰‡ -->
            <div class="card flex-card">
                <div class="card-title">ğŸ—ºï¸ å››å·çœæ ¸åŒ»è¯äº§ä¸šåˆ†å¸ƒâ€”"ä¸€é“¾å››æ"</div>
                <!-- åœ°å›¾åŒºåŸŸ -->
                <div id="china-map">
                    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
                    <div id="map-loading" style="display: flex; align-items: center; justify-content: center; height: 100%; min-height: 200px;">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 20px; animation: pulse 2s infinite;">ğŸ—ºï¸</div>
                            <div style="font-size: 18px; color: #667eea;">æ­£åœ¨åŠ è½½åœ°å›¾æ•°æ®...</div>
                            <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">è¯·ç¨å€™</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§åˆ— -->
        <div class="right-column">
            <!-- å››å·é‡ç‚¹åŒºåŸŸ -->
            <div class="card">
                <div class="card-title">â­ æ³¸å·å¸‚æ ¸åŒ»è¯äº§ä¸šå¸ƒå±€</div>

                <!-- äº§ä¸šå›­æ•°é‡ -->
                <div style="margin-bottom: 15px; padding: 15px; background: linear-gradient(135deg, rgba(74, 222, 128, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%); border-radius: 12px; border: 1px solid rgba(74, 222, 128, 0.2);">
                    <div style="font-size: 13px; color: #a0aec0; margin-bottom: 6px;">äº§ä¸šå›­æ•°é‡</div>
                    <div style="display: flex; align-items: baseline; gap: 8px;">
                        <div style="font-size: 48px; font-weight: bold; background: linear-gradient(90deg, #4ade80 0%, #3b82f6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1;">2</div>
                        <div style="font-size: 18px; color: #667eea;">ä¸ª</div>
                    </div>
                </div>

                <!-- ä¸€å›­ä¸¤åŒº -->
                <div style="padding: 15px; background: rgba(33, 150, 243, 0.08); border-radius: 12px; border-left: 4px solid #2196f3;">
                    <div style="font-size: 15px; color: #4ade80; margin-bottom: 12px; font-weight: 600;">
                        ğŸ­ è¥¿å—æ ¸åŒ»ç–—äº§ä¸šå›­ - "ä¸€å›­ä¸¤åŒº"
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <!-- æ³¸å¿å›­åŒº -->
                        <div style="padding: 12px; background: rgba(74, 222, 128, 0.15); border-radius: 10px; border: 2px solid rgba(74, 222, 128, 0.3);">
                            <div style="font-size: 14px; color: #4ade80; margin-bottom: 8px; font-weight: 600;">æ³¸å¿å›­åŒº</div>
                            <div style="font-size: 12px; color: #a0aec0; line-height: 1.6;">
                                è§„åˆ’é¢ç§¯<br>
                                <span style="color: #4ade80; font-size: 20px; font-weight: bold;">8500</span> <span style="font-size: 13px;">äº©</span>
                            </div>
                        </div>
                        <!-- æ±Ÿé˜³å›­åŒº -->
                        <div style="padding: 12px; background: rgba(33, 150, 243, 0.15); border-radius: 10px; border: 2px solid rgba(33, 150, 243, 0.3);">
                            <div style="font-size: 14px; color: #2196f3; margin-bottom: 8px; font-weight: 600;">æ±Ÿé˜³å›­åŒº</div>
                            <div style="font-size: 12px; color: #a0aec0; line-height: 1.6;">
                                é…å¥—æœåŠ¡<br>
                                <span style="color: #2196f3; font-size: 20px; font-weight: bold;">ä¸´åºŠ</span> <span style="font-size: 13px;">åº”ç”¨</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ³¸å·äº¤é€šæ¢çº½ä¼˜åŠ¿ -->
            <div class="card flex-card">
                <div class="card-title">ğŸš„ æ³¸å·äº¤é€šæ¢çº½ä¼˜åŠ¿</div>

                <!-- æ»šåŠ¨å®¹å™¨ -->
                <div id="transportScroll" class="scroll-list">
                        <!-- åŒºä½ä¼˜åŠ¿ -->
                        <div style="margin-bottom: 8px; padding: 8px; background: rgba(74, 222, 128, 0.08); border-radius: 6px; border-left: 3px solid #4ade80;">
                            <div style="font-size: 11px; color: #4ade80; margin-bottom: 3px; font-weight: 600;">ğŸ“ åŒºä½ä¼˜åŠ¿</div>
                            <div style="font-size: 11px; color: #a0aec0; line-height: 1.4;">
                                å·æ»‡é»”æ¸å››çœäº¤ç•Œ Â· æˆæ¸åŒåŸç»æµåœˆä¸­å¿ƒ
                            </div>
                        </div>

                        <!-- å…³é”®æ•°æ® -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;">
                            <div style="padding: 8px; background: rgba(33, 150, 243, 0.08); border-radius: 6px; text-align: center;">
                                <div style="font-size: 10px; color: #a0aec0; margin-bottom: 2px;">è·æˆéƒ½</div>
                                <div style="font-size: 20px; font-weight: bold; color: #2196f3; line-height: 1;">230</div>
                                <div style="font-size: 9px; color: #667eea;">å…¬é‡Œ</div>
                            </div>
                            <div style="padding: 8px; background: rgba(33, 150, 243, 0.08); border-radius: 6px; text-align: center;">
                                <div style="font-size: 10px; color: #a0aec0; margin-bottom: 2px;">è·é‡åº†</div>
                                <div style="font-size: 20px; font-weight: bold; color: #2196f3; line-height: 1;">130</div>
                                <div style="font-size: 9px; color: #667eea;">å…¬é‡Œ</div>
                            </div>
                        </div>

                        <!-- äº¤é€šè®¾æ–½ -->
                        <div style="margin-bottom: 8px; padding: 8px; background: rgba(240, 147, 251, 0.08); border-radius: 6px;">
                            <div style="font-size: 11px; color: #a0aec0; line-height: 1.6;">
                                <div style="margin-bottom: 3px;">
                                    <span style="color: #f093fb;">âœˆï¸</span> äº‘é¾™æœºåœºï¼š<span style="color: #f093fb; font-weight: bold;">44</span>ä¸ªåŸå¸‚ç›´è¾¾
                                </div>
                                <div style="margin-bottom: 3px;">
                                    <span style="color: #667eea;">ğŸš¢</span> æ³¸å·æ¸¯ï¼šå››å·çœ<span style="color: #667eea; font-weight: bold;">ç¬¬ä¸€</span>å¤§æ°´è¿æ¸¯
                                </div>
                                <div>
                                    <span style="color: #4ade80;">ğŸ›£ï¸</span> é«˜é€Ÿå…¬è·¯ï¼šå·å—<span style="color: #4ade80; font-weight: bold;">ç¬¬ä¸€</span>
                                </div>
                            </div>
                        </div>

                        <!-- åŒé€šé“ä¼˜åŠ¿ -->
                        <div style="padding: 6px 10px; background: rgba(255, 82, 82, 0.1); border-radius: 6px; text-align: center; margin-bottom: 8px;">
                            <div style="font-size: 10px; color: #ff5252; font-weight: 600;">
                                ğŸŒ å››å·å”¯ä¸€å›½é™…æ°´è¿+é™†è¿åŒé€šé“åŸå¸‚
                            </div>
                        </div>

                        <!-- ç»¼åˆäº¤é€šæ¢çº½ -->
                        <div style="margin-bottom: 8px; padding: 8px; background: rgba(102, 126, 234, 0.08); border-radius: 6px;">
                            <div style="font-size: 11px; color: #667eea; margin-bottom: 4px; font-weight: 600;">ğŸš‰ ç»¼åˆäº¤é€šæ¢çº½</div>
                            <div style="font-size: 10px; color: #a0aec0; line-height: 1.6;">
                                é›†é“è·¯ã€å…¬è·¯ã€èˆªç©ºã€æ°´è·¯ä¸ºä¸€ä½“
                            </div>
                        </div>

                        <!-- é«˜é€Ÿå…¬è·¯ç½‘ç»œ -->
                        <div style="padding: 8px; background: rgba(74, 222, 128, 0.08); border-radius: 6px;">
                            <div style="font-size: 11px; color: #4ade80; margin-bottom: 4px; font-weight: 600;">ğŸ›£ï¸ é«˜é€Ÿå…¬è·¯ç½‘ç»œ</div>
                            <div style="font-size: 10px; color: #a0aec0; line-height: 1.6;">
                                "ä¸€ç¯ä¸ƒå°„ä¸€æ¨ª"éª¨æ¶ Â· é€šè½¦é‡Œç¨‹å·å—ç¬¬ä¸€
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>

    <!-- EChartsåº“ - æœ¬åœ°åŠ è½½ -->
    <script src="libs/echarts.min.js"></script>

    <script>
        // ç®€åŒ–ç‰ˆç²’å­èƒŒæ™¯(ä¸ä¾èµ–å¤–éƒ¨åº“)
        function createParticles() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const container = document.getElementById('particles-js');
            container.appendChild(canvas);

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            canvas.style.position = 'absolute';
            canvas.style.top = '0';
            canvas.style.left = '0';

            const particles = [];
            const particleCount = 80;

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.vx = (Math.random() - 0.5) * 2;
                    this.vy = (Math.random() - 0.5) * 2;
                    this.radius = Math.random() * 3 + 1;
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;

                    if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
                }

                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(102, 126, 234, 0.5)';
                    ctx.fill();
                }
            }

            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });

                // ç»˜åˆ¶è¿çº¿
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < 150) {
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.strokeStyle = `rgba(102, 126, 234, ${0.4 * (1 - distance / 150)})`;
                            ctx.lineWidth = 1;
                            ctx.stroke();
                        }
                    }
                }

                requestAnimationFrame(animate);
            }

            animate();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // å¯åŠ¨ç²’å­èƒŒæ™¯
        createParticles();

        // å®æ—¶æ—¶é—´æ›´æ–°
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.getElementById('currentTime').textContent = timeStr;
        }
        setInterval(updateTime, 1000);
        updateTime();

        // æ•°å­—æ»šåŠ¨åŠ¨ç”»
        function animateValue(element, start, end, duration) {
            const range = end - start;
            const increment = end > start ? 1 : -1;
            const stepTime = Math.abs(Math.floor(duration / range));
            let current = start;
            const timer = setInterval(() => {
                current += increment * Math.ceil(range / 100);
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current);
            }, stepTime);
        }

        // åˆå§‹åŒ–æ•°å­—åŠ¨ç”»
        window.addEventListener('load', () => {
            document.querySelectorAll('.count-up').forEach(el => {
                const target = parseInt(el.getAttribute('data-target'));
                animateValue(el, 0, target, 2000);
            });

            // è¿›åº¦æ¡åŠ¨ç”»
            setTimeout(() => {
                document.querySelectorAll('.progress-fill').forEach(el => {
                    const width = el.getAttribute('data-width');
                    el.style.width = width;
                });
            }, 500);
        });

        // åŸå¸‚æ•°æ® - æ‰©å±•å…¨å›½å¸ƒå±€
        // å››å·çœ"ä¸€é“¾å››æ"æ ¸åŒ»ç–—äº§ä¸šå›­å¸ƒå±€ï¼ˆçœŸå®æ•°æ®ï¼‰
        const cities = [
            { province: 'å››å·', city: 'æ³¸å·', type: 'æ ¸åŒ»ç–—äº§ä¸šå›­', description: 'è¥¿å—æ ¸åŒ»ç–—äº§ä¸šå›­ - ä¸´åºŠè½¬åŒ–åº”ç”¨æ', detail: '2024å¹´9æœˆæ­ç‰Œï¼Œè§„åˆ’8500äº©ï¼Œæ–°å‹æ ¸ç´ è¯Šç–—é‡å…¨å›½ç¬¬ä¸€', level: 1 },
            { province: 'å››å·', city: 'ç»µé˜³å¸‚æ¸¸ä»™åŒº', type: 'æ ¸åŒ»ç–—å¥åº·äº§ä¸šå›­', description: 'æ ¸åŒ»ç–—å¥åº·äº§ä¸šå›­ - è£…å¤‡åˆ¶é€ æ', detail: 'ä¸»ä½“ç»“æ„å·²å°é¡¶ï¼Œå…¨å›½å»ºè®¾é€Ÿåº¦æœ€å¿«', level: 1 },
            { province: 'å››å·', city: 'æˆéƒ½åŒ»å­¦åŸ', type: 'æ”¾å°„æ€§è¯ç‰©äº§ä¸šå›­', description: 'æ”¾å°„æ€§è¯ç‰©äº§ä¸šå›­ - ç§‘æŠ€åˆ›æ–°æ', detail: 'æ ¸åŒ»ç–—è£…å¤‡ç ”å‘ã€æ ¸è¯ç ”å‘', level: 1 },
            { province: 'å››å·', city: 'æˆéƒ½å¤©åºœå›½é™…ç”Ÿç‰©åŸ', type: 'æ ¸åŒ»ç–—äº§ä¸šå›­', description: 'æ ¸åŒ»ç–—äº§ä¸šå›­ - ç§‘æŠ€åˆ›æ–°æ', detail: 'ç”Ÿç‰©åŒ»è¯ä¸æ ¸åŒ»ç–—èåˆå‘å±•', level: 1 },
            { province: 'å››å·', city: 'ä¹å±±å¸‚å¤¹æ±Ÿå¿', type: 'æ ¸æŠ€æœ¯åº”ç”¨äº§ä¸šå›­', description: 'æ ¸æŠ€æœ¯åº”ç”¨äº§ä¸šå›­ - åŒä½ç´ ç”Ÿäº§æ', detail: 'ååº”å †èµ„æºä¼˜åŠ¿ï¼ŒåŒ»ç”¨åŒä½ç´ å’Œæ ¸ç´ åŸæ–™è¯ç”Ÿäº§', level: 1 }
        ];

        // æ¸²æŸ“åŸå¸‚åˆ—è¡¨
        function renderCityList() {
            const cityList = document.getElementById('cityList');
            cities.forEach((item, index) => {
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'list-item';
                    div.innerHTML = `
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <span style="color: #4ade80; font-weight: bold; font-size: 16px;">${item.city}</span>
                                <span style="color: #a0aec0; font-size: 12px; margin-left: 10px;">[${item.type}]</span>
                            </div>
                            <div style="color: #667eea; font-size: 13px; margin-bottom: 5px;">${item.description}</div>
                            <div style="color: #a0aec0; font-size: 12px; line-height: 1.5;">${item.detail}</div>
                        </div>
                    `;
                    cityList.appendChild(div);
                }, index * 300);
            });
        }

        // å®æ—¶æ•°æ®æµ - å››å·çœ"ä¸€é“¾å››æ"æ ¸åŒ»ç–—äº§ä¸šå›­ä¿¡æ¯
        const dataMessages = [
            'â–º å››å·çœæ ¸åŒ»ç–—äº§ä¸šå‘å±•æ ¼å±€: ä¸€é“¾å››æ',
            'â–º æ ¸åŒ»ç–—äº§ä¸šå›­æ•°é‡: 4ä¸ª',
            'â–º ç›®æ ‡: æ‰“é€ ä¸–ç•Œçº§æ ¸åŒ»ç–—äº§ä¸šå‘å±•é«˜åœ°',

            // æ³¸å· - ä¸´åºŠè½¬åŒ–åº”ç”¨æ
            'â–º æ³¸å·: è¥¿å—æ ¸åŒ»ç–—äº§ä¸šå›­',
            'â–º æ³¸å·äº§ä¸šå›­è§„æ¨¡: 8500äº©',
            'â–º æ³¸å·æ­ç‰Œæ—¶é—´: 2024å¹´9æœˆ',
            'â–º æ–°å‹æ ¸ç´ è¯Šç–—é‡: å…¨å›½ç¬¬ä¸€',
            'â–º å¹´æ ¸è¯Šç–—é‡: 1.6ä¸‡äººæ¬¡',
            'â–º è¾å°„èŒƒå›´: å…¨å›½30å¤šä¸ªçœå¸‚',
            'â–º 177Lu-PSMAæ²»ç–—: å…¨å›½é¢†å…ˆ',
            'â–º 90Yå¾®çƒæ²»ç–—: è¥¿å—é¦–ä¾‹',
            'â–º 225Acæ²»ç–—: å›½å†…å”¯ä¸€',

            // æ³¸å·æ ¸åŒ»ç–—åŸºé‡‘
            'â–º æ³¸å·æ˜Ÿç©ºæ ¸åŒ»ç–—åˆ›ä¸šæŠ•èµ„åŸºé‡‘: å››å·é¦–åªæ ¸åŒ»ç–—ä¸“é¡¹åŸºé‡‘',
            'â–º åŸºé‡‘æ€»è§„æ¨¡: 10äº¿å…ƒ',
            'â–º åŸºé‡‘é¦–æœŸ: 5äº¿å…ƒ',
            'â–º å‘å¸ƒæ—¶é—´: 2025å¹´4æœˆ10æ—¥',
            'â–º ç®¡ç†æœºæ„: æˆéƒ½å…‰è€€æ˜Ÿç©ºè‚¡æƒæŠ•èµ„ç®¡ç†æœ‰é™å…¬å¸',
            'â–º æŠ•èµ„æ–¹å‘: åˆ›æ–°æ ¸è¯ç ”å‘ç”Ÿäº§ã€CRDMOäº§ä¸šé“¾ã€æ ¸åŒ»ç–—è£…å¤‡',
            'â–º æ³¸å·äº§ä¸šæŠ•èµ„åŸºé‡‘ç¾¤: æ€»è§„æ¨¡550äº¿å…ƒ',
            'â–º äº§ä¸šå¼•å¯¼æ¯åŸºé‡‘: 50äº¿å…ƒ',
            'â–º äº‘é¾™æœºåœº: å…¨çœé¦–ä¸ªåŒ»ç”¨åŒä½ç´ è¿è¾“æ”¯çº¿æœºåœº',
            'â–º ç¨³å®šåŒä½ç´ é¡¹ç›®: å…¨å›½é¦–ä¸ªå•†ä¸šåŒ–ç”µç£æ³•ç”Ÿäº§é¡¹ç›®',
            'â–º ç¨³å®šåŒä½ç´ æŠ•èµ„: 2äº¿å…ƒä»¥ä¸Š',
            'â–º ç”Ÿäº§äº§å“: é•±-176ã€é’†-160ã€é“·-87ç­‰çè´µåŒä½ç´ ',

            // æˆéƒ½ - ç§‘æŠ€åˆ›æ–°æ
            'â–º æˆéƒ½: æ ¸åŒ»ç–—ç ”å‘ä¸­å¿ƒ',
            'â–º æˆéƒ½ä¼˜åŠ¿: æ ¸åŒ»ç–—è£…å¤‡ç ”å‘',
            'â–º æˆéƒ½é‡ç‚¹: æ ¸è¯ç ”å‘åˆ›æ–°',

            // ç»µé˜³ - è£…å¤‡åˆ¶é€ æ
            'â–º ç»µé˜³: æ ¸åŒ»ç–—äº§ä¸šå›­',
            'â–º ç»µé˜³è¿›åº¦: ä¸»ä½“ç»“æ„å·²å°é¡¶',
            'â–º ç»µé˜³é€Ÿåº¦: å…¨å›½å»ºè®¾æœ€å¿«',
            'â–º ç»µé˜³å®šä½: è£…å¤‡åˆ¶é€ åŸºåœ°',

            // ä¹å±± - åŒä½ç´ ç”Ÿäº§æ
            'â–º ä¹å±±: åŒ»ç”¨åŒä½ç´ ç”Ÿäº§åŸºåœ°',
            'â–º ä¹å±±ä¼˜åŠ¿: ååº”å †èµ„æº',
            'â–º ä¹å±±é‡ç‚¹: åŒ»ç”¨åŒä½ç´ ç”Ÿäº§',
            'â–º ä¹å±±äº§å“: æ ¸ç´ åŸæ–™è¯',

            // äº§ä¸šç›®æ ‡
            'â–º 2027å¹´ç›®æ ‡: å›½å†…é¢†å…ˆäº§ä¸šé›†ç¾¤',
            'â–º 2030å¹´ç›®æ ‡: å…¨çƒæœ€å¤§åŒä½ç´ ç”Ÿäº§åŸºåœ°',
            'â–º 2030å¹´ç›®æ ‡: å…¨å›½æœ€å¤§æ”¾å°„æ€§è¯ç‰©ç”Ÿäº§åœ°',
            'â–º 2030å¹´ç›®æ ‡: å…¨å›½æœ€å¥½æ ¸åŒ»ç–—ä¸­å¿ƒ',

            // ä¸´åºŠåº”ç”¨
            'â–º 177Lu-PSMA: å‰åˆ—è…ºç™Œç²¾å‡†æ²»ç–—',
            'â–º 68Ga-DOTATATE: ç¥ç»å†…åˆ†æ³Œè‚¿ç˜¤è¯Šæ–­',
            'â–º æ ¸åŒ»å­¦äººæ‰: å…¨å›½é¦–ä¸ªæ ¸åŒ»è¯äº§ä¸šå­¦é™¢',
            'â–º äº§ä¸šé“¾: åŒ»ç”¨åŒä½ç´ â†’æ”¾å°„æ€§è¯ç‰©â†’è£…å¤‡â†’ä¸´åºŠ',
            'â–º å¹¿å…ƒä¸‰å †é•‡: æ”¾å°„æ€§å›ºä½“åºŸç‰©å¤„ç†å¤„ç½®ä¸­å¿ƒ',
            'â–º æ¡¶å¤–æ…æ‹Œæ°´æ³¥å›ºåŒ–æŠ€æœ¯: å›½å†…é¢†å…ˆ',
            'â–º æœ‰æœºåºŸæ¶²çƒ­è§£ç„šçƒ§å·¥ç¨‹: å·²æŠ•å…¥è¿è¡Œ',
            'â–º é«˜æ”¾ç»ç’ƒå›ºåŒ–å»ºè®¾: å®Œæˆå†·è¯•',
            'â–º å››å·çœè¾å°„ç¯å¢ƒç®¡ç†ç›‘æµ‹ä¸­å¿ƒ: å…¬ç›ŠåŒ–ç›‘ç®¡',
            'â–º åŸå¸‚æ”¾å°„æ€§åºŸç‰©åº“: è¿è¡Œç®¡ç†ä¸­',
            'â–º æ ¸åŠ¨åŠ›ç ”ç©¶è®¾è®¡é™¢: 30ä½™é¡¹å‘æ˜ä¸“åˆ©',
            'â–º æ ¸è®¾æ–½é€€å½¹å·¥ç¨‹å®éªŒå®¤: æŠ€æœ¯å›½é™…å…ˆè¿›',
            'â–º å››å·æ ¸åºŸå¤„ç†: è¦†ç›–å•†ä¸šåŒ–+å…¬ç›ŠåŒ–+ç ”å‘'
        ];

        let messageIndex = 0;
        function updateDataStream() {
            const dataStream = document.getElementById('dataStream');
            const message = dataMessages[messageIndex];
            const div = document.createElement('div');
            div.textContent = message;
            div.style.opacity = '0';
            div.style.transition = 'opacity 0.5s';

            dataStream.appendChild(div);
            setTimeout(() => div.style.opacity = '1', 10);

            // ä¿æŒæœ€å¤š10æ¡æ¶ˆæ¯
            while (dataStream.children.length > 10) {
                dataStream.removeChild(dataStream.firstChild);
            }

            messageIndex = (messageIndex + 1) % dataMessages.length;
        }

        setInterval(updateDataStream, 2000);
        setTimeout(updateDataStream, 1000);

        // æ˜¾ç¤ºåœ°å›¾åŠ è½½é”™è¯¯
        function showMapError(error) {
            console.error('æ˜¾ç¤ºåœ°å›¾é”™è¯¯ä¿¡æ¯:', error);
            document.getElementById('china-map').innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #a0aec0;">
                    <div style="text-align: center; max-width: 600px; padding: 20px;">
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ—ºï¸</div>
                        <div style="font-size: 18px; margin-bottom: 20px; color: #fff;">å››å·çœæ ¸åŒ»ç–—äº§ä¸šå›­åˆ†å¸ƒå›¾</div>
                        <div style="margin-top: 20px; font-size: 14px; line-height: 2.5;">
                            <div style="color: #4ade80; font-size: 16px;">â— æ³¸å·: è¥¿å—æ ¸åŒ»ç–—äº§ä¸šå›­ï¼ˆä¸´åºŠè½¬åŒ–åº”ç”¨æï¼‰</div>
                            <div style="color: #667eea; margin-top: 8px; font-size: 16px;">â— æˆéƒ½: æ ¸åŒ»ç–—ç ”å‘ä¸­å¿ƒï¼ˆç§‘æŠ€åˆ›æ–°æï¼‰</div>
                            <div style="color: #3b82f6; margin-top: 8px; font-size: 16px;">â— ç»µé˜³: æ ¸åŒ»ç–—äº§ä¸šå›­ï¼ˆè£…å¤‡åˆ¶é€ æï¼‰</div>
                            <div style="color: #fbbf24; margin-top: 8px; font-size: 16px;">â— ä¹å±±: åŒ»ç”¨åŒä½ç´ ç”Ÿäº§åŸºåœ°ï¼ˆåŒä½ç´ ç”Ÿäº§æï¼‰</div>
                            <div style="color: #10b981; margin-top: 8px; font-size: 16px;">â— æ³¸å¿: äº§ä¸šæ ¸å¿ƒåŒºï¼ˆè¥¿å—æ ¸åŒ»ç–—äº§ä¸šå›­ï¼‰</div>
                            <div style="margin-top: 25px; color: #667eea; font-size: 15px; border-top: 1px solid rgba(102, 126, 234, 0.3); padding-top: 20px;">
                                ğŸ“Š å››å·çœ"ä¸€é“¾å››æ"æ ¸åŒ»ç–—äº§ä¸šå‘å±•æ ¼å±€
                            </div>
                            <div style="margin-top: 15px; color: #ff6b6b; font-size: 12px; background: rgba(255, 107, 107, 0.1); padding: 10px; border-radius: 5px;">
                                âš ï¸ åœ°å›¾åŠ è½½å¤±è´¥: ${error.message}<br>
                                <span style="color: #a0aec0; font-size: 11px;">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // æœ¬åœ°å¤‡ç”¨åœ°å›¾æ•°æ®ï¼ˆç®€åŒ–ç‰ˆå››å·çœGeoJSONï¼‰
        const localSichuanMapData = {
            "type": "FeatureCollection",
            "features": [{
                "type": "Feature",
                "properties": {"name": "å››å·çœ"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[
                        [97.35, 33.00], [108.55, 33.00], [108.55, 26.05], [97.35, 26.05], [97.35, 33.00]
                    ]]
                }
            }]
        };

        // é™æ€åœ°å›¾å¤‡ç”¨æ–¹æ¡ˆï¼ˆä½¿ç”¨æœ€æ–°çš„å››å·çœåœ°å›¾ - è“è‰²ç³»ï¼Œæ³¸å·çº¢è‰²çªå‡ºï¼‰
        function showStaticMap() {
            console.log('ä½¿ç”¨é™æ€åœ°å›¾å¤‡ç”¨æ–¹æ¡ˆï¼ˆæœ€æ–°å››å·çœåœ°å›¾ - åŒ…å«21ä¸ªå¸‚/å·è¾¹ç•Œï¼‰');
            const mapContainer = document.getElementById('china-map');

            // ç§»é™¤åŠ è½½æŒ‡ç¤ºå™¨
            const loadingIndicator = document.getElementById('map-loading');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }

            mapContainer.innerHTML = `
                <div style="position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; overflow: hidden; background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);">
                    <!-- ç§‘æŠ€æ„Ÿç½‘æ ¼èƒŒæ™¯ -->
                    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image:
                        linear-gradient(rgba(102, 126, 234, 0.1) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(102, 126, 234, 0.1) 1px, transparent 1px);
                        background-size: 50px 50px; opacity: 0.3;"></div>

                    <!-- é™æ€åœ°å›¾èƒŒæ™¯ - æœ€æ–°ç”Ÿæˆçš„å››å·çœåœ°å›¾ï¼ˆè“è‰²ç³»ï¼Œæ³¸å·çº¢è‰²çªå‡ºï¼‰ -->
                    <img src="åŸºç¡€çŸ¥è¯†_html/åœ°å›¾/images/åœ°å›¾.png" alt="å››å·çœåœ°å›¾" style="max-width: 95%; max-height: 95%; object-fit: contain; filter: drop-shadow(0 0 20px rgba(33, 150, 243, 0.5)) brightness(0.9) contrast(1.1);">

                    <!-- SVGè¿çº¿å±‚ -->
                    <svg style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;" viewBox="0 0 100 100" preserveAspectRatio="none">
                        <defs>
                            <!-- å®šä¹‰å‘å…‰æ»¤é•œ -->
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                            <!-- å®šä¹‰æµåŠ¨åŠ¨ç”» -->
                            <linearGradient id="lineGradient">
                                <stop offset="0%" stop-color="#00d4ff" stop-opacity="0.3"/>
                                <stop offset="50%" stop-color="#4ade80" stop-opacity="1"/>
                                <stop offset="100%" stop-color="#00d4ff" stop-opacity="0.3"/>
                            </linearGradient>
                        </defs>

                        <!-- ç¯çŠ¶è¿çº¿ -->
                        <path d="M 45 50 Q 47.5 42.5 50 35" stroke="#00d4ff" stroke-width="0.3" fill="none" opacity="0.8" filter="url(#glow)">
                            <animate attributeName="stroke-dasharray" from="0,10" to="10,0" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 50 35 Q 45 50 40 65" stroke="#00d4ff" stroke-width="0.3" fill="none" opacity="0.8" filter="url(#glow)">
                            <animate attributeName="stroke-dasharray" from="0,10" to="10,0" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 40 65 Q 50 67.5 60 70" stroke="#00d4ff" stroke-width="0.3" fill="none" opacity="0.8" filter="url(#glow)">
                            <animate attributeName="stroke-dasharray" from="0,10" to="10,0" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 60 70 Q 52.5 60 45 50" stroke="#00d4ff" stroke-width="0.3" fill="none" opacity="0.8" filter="url(#glow)">
                            <animate attributeName="stroke-dasharray" from="0,10" to="10,0" dur="2s" repeatCount="indefinite"/>
                        </path>

                        <!-- äº¤å‰è¿çº¿ -->
                        <path d="M 45 50 Q 42.5 57.5 40 65" stroke="#00d4ff" stroke-width="0.25" fill="none" opacity="0.6" filter="url(#glow)" stroke-dasharray="2,2">
                            <animate attributeName="stroke-dashoffset" from="0" to="4" dur="1.5s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 50 35 Q 55 52.5 60 70" stroke="#00d4ff" stroke-width="0.25" fill="none" opacity="0.6" filter="url(#glow)" stroke-dasharray="2,2">
                            <animate attributeName="stroke-dashoffset" from="0" to="4" dur="1.5s" repeatCount="indefinite"/>
                        </path>
                    </svg>

                    <!-- äº§ä¸šå›­æ ‡è®°ç‚¹å®¹å™¨ -->
                    <div id="static-markers" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                        <!-- æ³¸å· - ä¸´åºŠè½¬åŒ–åº”ç”¨æï¼ˆçº¢è‰²çªå‡ºï¼Œä¸åœ°å›¾ä¸€è‡´ï¼‰ -->
                        <div class="static-marker" style="left: 60%; top: 70%; --marker-color: #ff5252;"
                             data-city="æ³¸å·"
                             data-desc="è¥¿å—æ ¸åŒ»ç–—äº§ä¸šå›­ - ä¸´åºŠè½¬åŒ–åº”ç”¨æ"
                             data-detail="2024å¹´9æœˆæ­ç‰Œï¼Œè§„åˆ’8471äº©ï¼Œæ–°å‹æ ¸ç´ è¯Šç–—é‡å…¨å›½ç¬¬ä¸€">
                            <div class="marker-dot"></div>
                            <div class="marker-label">æ³¸å·<br>ä¸´åºŠè½¬åŒ–åº”ç”¨æ</div>
                        </div>

                        <!-- æˆéƒ½ - ç§‘æŠ€åˆ›æ–°æï¼ˆè“è‰²ç³»ï¼‰ -->
                        <div class="static-marker" style="left: 45%; top: 50%; --marker-color: #2196f3;"
                             data-city="æˆéƒ½"
                             data-desc="æ ¸åŒ»ç–—ç ”å‘ä¸­å¿ƒ - ç§‘æŠ€åˆ›æ–°æ"
                             data-detail="æ ¸åŒ»ç–—è£…å¤‡ç ”å‘ã€æ ¸è¯ç ”å‘">
                            <div class="marker-dot"></div>
                            <div class="marker-label">æˆéƒ½<br>ç§‘æŠ€åˆ›æ–°æ</div>
                        </div>

                        <!-- ç»µé˜³ - è£…å¤‡åˆ¶é€ æï¼ˆè“è‰²ç³»ï¼‰ -->
                        <div class="static-marker" style="left: 50%; top: 35%; --marker-color: #1976d2;"
                             data-city="ç»µé˜³"
                             data-desc="æ ¸åŒ»ç–—äº§ä¸šå›­ - è£…å¤‡åˆ¶é€ æ"
                             data-detail="ä¸»ä½“ç»“æ„å·²å°é¡¶ï¼Œå…¨å›½å»ºè®¾é€Ÿåº¦æœ€å¿«">
                            <div class="marker-dot"></div>
                            <div class="marker-label">ç»µé˜³<br>è£…å¤‡åˆ¶é€ æ</div>
                        </div>

                        <!-- ä¹å±± - åŒä½ç´ ç”Ÿäº§æï¼ˆè“è‰²ç³»ï¼‰ -->
                        <div class="static-marker" style="left: 40%; top: 65%; --marker-color: #1565c0;"
                             data-city="ä¹å±±"
                             data-desc="åŒ»ç”¨åŒä½ç´ ç”Ÿäº§åŸºåœ° - åŒä½ç´ ç”Ÿäº§æ"
                             data-detail="ååº”å †èµ„æºä¼˜åŠ¿ï¼ŒåŒ»ç”¨åŒä½ç´ å’Œæ ¸ç´ åŸæ–™è¯ç”Ÿäº§">
                            <div class="marker-dot"></div>
                            <div class="marker-label">ä¹å±±<br>åŒä½ç´ ç”Ÿäº§æ</div>
                        </div>
                    </div>

                    <!-- Tooltip -->
                    <div id="static-tooltip" style="display: none; position: absolute; background: rgba(0, 0, 0, 0.9); color: white; padding: 15px; border-radius: 8px; border: 2px solid #667eea; pointer-events: none; z-index: 1000; max-width: 300px;">
                        <div id="tooltip-city" style="font-size: 16px; font-weight: bold; margin-bottom: 8px; color: #4ade80;"></div>
                        <div id="tooltip-desc" style="font-size: 13px; margin-bottom: 5px; color: #667eea;"></div>
                        <div id="tooltip-detail" style="font-size: 12px; color: #a0aec0; line-height: 1.5;"></div>
                    </div>
                </div>
            `;

            // æ·»åŠ æ ‡è®°ç‚¹äº¤äº’
            setTimeout(() => {
                const markers = document.querySelectorAll('.static-marker');
                const tooltip = document.getElementById('static-tooltip');

                markers.forEach(marker => {
                    marker.style.pointerEvents = 'auto';
                    marker.style.cursor = 'pointer';

                    marker.addEventListener('mouseenter', function(e) {
                        const city = this.getAttribute('data-city');
                        const desc = this.getAttribute('data-desc');
                        const detail = this.getAttribute('data-detail');
                        const markerColor = this.style.getPropertyValue('--marker-color');

                        document.getElementById('tooltip-city').textContent = city;
                        document.getElementById('tooltip-desc').textContent = desc;
                        document.getElementById('tooltip-detail').textContent = detail;

                        // æ ¹æ®åŸå¸‚è®¾ç½®tooltipé¢œè‰²ï¼ˆæ³¸å·å’Œæ³¸å¿ç”¨çº¢è‰²ï¼Œå…¶ä»–ç”¨è“è‰²ï¼‰
                        const cityElement = document.getElementById('tooltip-city');
                        if (city === 'æ³¸å·') {
                            cityElement.style.color = '#ff5252';
                            tooltip.style.borderColor = '#ff5252';
                        } else {
                            cityElement.style.color = '#2196f3';
                            tooltip.style.borderColor = '#2196f3';
                        }

                        tooltip.style.display = 'block';
                    });

                    marker.addEventListener('mousemove', function(e) {
                        tooltip.style.left = (e.pageX + 15) + 'px';
                        tooltip.style.top = (e.pageY + 15) + 'px';
                    });

                    marker.addEventListener('mouseleave', function() {
                        tooltip.style.display = 'none';
                    });
                });
            }, 100);
        }

        // åˆå§‹åŒ–åœ°å›¾ - ä½¿ç”¨ç®€åŒ–ç‰ˆæˆåŠŸæ–¹æ¡ˆ
        function initMap() {
            console.log('å¼€å§‹åˆå§‹åŒ–åœ°å›¾...');
            console.log('EChartsæ˜¯å¦åŠ è½½:', typeof echarts !== 'undefined');

            // æ£€æŸ¥åœ°å›¾å®¹å™¨
            const mapContainer = document.getElementById('china-map');
            if (!mapContainer) {
                console.error('âŒ åœ°å›¾å®¹å™¨å…ƒç´ ä¸å­˜åœ¨!');
                return;
            }

            // æ£€æŸ¥å®¹å™¨å°ºå¯¸
            const containerRect = mapContainer.getBoundingClientRect();
            console.log('åœ°å›¾å®¹å™¨å°ºå¯¸:', {
                width: containerRect.width,
                height: containerRect.height,
                offsetWidth: mapContainer.offsetWidth,
                offsetHeight: mapContainer.offsetHeight
            });

            if (typeof echarts === 'undefined') {
                console.warn('âš ï¸ EChartsæœªåŠ è½½ï¼Œä½¿ç”¨é™æ€åœ°å›¾å¤‡ç”¨æ–¹æ¡ˆ');
                showStaticMap();
                return;
            }

            // ç§»é™¤åŠ è½½æŒ‡ç¤ºå™¨
            const loadingIndicator = document.getElementById('map-loading');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }

            // ç¡®ä¿å®¹å™¨æœ‰é«˜åº¦
            if (mapContainer.offsetHeight === 0) {
                console.warn('âš ï¸ åœ°å›¾å®¹å™¨é«˜åº¦ä¸º0ï¼Œè®¾ç½®é»˜è®¤é«˜åº¦');
                mapContainer.style.height = '600px';
            }

            const mapChart = echarts.init(mapContainer);
            console.log('åœ°å›¾å®¹å™¨åˆå§‹åŒ–å®Œæˆï¼ŒEChartså®ä¾‹:', mapChart);

            // å››å·çœ"ä¸€é“¾å››æ"åŸå¸‚åæ ‡æ•°æ®ï¼ˆç§»é™¤å¹¿å…ƒå’Œæ³¸å¿ï¼‰
            const cityCoords = {
                'æ³¸å·': [105.443, 28.889],
                'æˆéƒ½': [104.066, 30.572],
                'ç»µé˜³': [104.679, 31.467],
                'ä¹å±±': [103.761, 29.582]
            };

            const cityData = cities.map(item => ({
                name: item.city,
                coord: cityCoords[item.city],
                description: item.description,
                detail: item.detail,
                type: item.type,
                level: item.level
            }));

            // è½¬æ¢ä¸ºæ•£ç‚¹æ•°æ®æ ¼å¼
            const scatterData = cityData.map(item => ({
                name: item.name,
                value: [...item.coord, 1], // ç¬¬ä¸‰ä¸ªå€¼ç”¨äºå¤§å°è®¡ç®—
                description: item.description,
                detail: item.detail,
                type: item.type,
                level: item.level,
                itemStyle: {
                    color: item.name === 'æ³¸å·' ? '#4ade80' :
                           item.name === 'æ³¸å¿' ? '#10b981' :
                           item.name === 'æˆéƒ½' ? '#667eea' :
                           item.name === 'ç»µé˜³' ? '#3b82f6' :
                           item.name === 'ä¹å±±' ? '#fbbf24' : '#667eea'
                }
            }));

            console.log('æ•£ç‚¹æ•°æ®æ•°é‡:', scatterData.length);
            console.log('äº§ä¸šå›­åŸå¸‚:', scatterData.map(item => item.name).join(', '));



            // ç®€åŒ–çš„åœ°å›¾é…ç½® - æ·±è‰²ç§‘æŠ€é£æ ¼
            const option = {
                backgroundColor: 'transparent',  // ä½¿ç”¨å¤–å±‚å®¹å™¨çš„æ·±è‰²èƒŒæ™¯
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        const cityInfo = scatterData.find(c => c.name === params.name);
                        if (cityInfo) {
                            return `<div style="padding: 5px;">
                                <div style="font-size: 16px; font-weight: bold; margin-bottom: 8px; color: #4ade80;">${params.name}</div>
                                <div style="font-size: 13px; margin-bottom: 5px; color: #667eea;">${cityInfo.description}</div>
                                <div style="font-size: 12px; color: #a0aec0; line-height: 1.5;">${cityInfo.detail}</div>
                            </div>`;
                        }
                        return params.name;
                    },
                    backgroundColor: 'rgba(0, 0, 0, 0.9)',
                    borderColor: function(params) {
                        // æ³¸å·ä½¿ç”¨çº¢è‰²è¾¹æ¡†
                        if (params.name === 'æ³¸å·') {
                            return '#ff5252';
                        }
                        // å…¶ä»–åŸå¸‚ä½¿ç”¨è“è‰²è¾¹æ¡†
                        return '#2196f3';
                    },
                    borderWidth: 2,
                    textStyle: {
                        color: '#fff'
                    },
                    padding: 15
                },
                geo: {
                    map: 'sichuan',
                    roam: true,
                    zoom: 1.6,
                    center: [104.0, 30.5],
                    label: {
                        emphasis: {
                            show: true,
                            color: '#fff'
                        }
                    },
                    itemStyle: {
                        normal: {
                            areaColor: 'rgba(33, 150, 243, 0.08)',  // æ›´æš—çš„è“è‰²ï¼Œé€‚é…æ·±è‰²èƒŒæ™¯
                            borderColor: 'rgba(0, 212, 255, 0.5)',  // äº®è“è‰²è¾¹ç•Œï¼Œç§‘æŠ€æ„Ÿ
                            borderWidth: 2,
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 212, 255, 0.3)'
                        },
                        emphasis: {
                            areaColor: 'rgba(33, 150, 243, 0.25)',  // æ‚¬åœæ—¶çš„è“è‰²
                            borderColor: 'rgba(0, 212, 255, 0.8)',
                            shadowBlur: 20,
                            shadowColor: 'rgba(0, 212, 255, 0.5)'
                        }
                    }
                },
                series: [
                    // "ä¸€é“¾" - äº§ä¸šé“¾è¿çº¿
                    {
                        name: 'äº§ä¸šé“¾',
                        type: 'lines',
                        coordinateSystem: 'geo',
                        zlevel: 1,
                        effect: {
                            show: true,
                            period: 4,  // åŠ å¿«æµåŠ¨é€Ÿåº¦
                            trailLength: 0.5,
                            color: '#4ade80',  // ç»¿è‰²æµåŠ¨æ•ˆæœ
                            symbolSize: 6,  // å¢å¤§æµåŠ¨ç‚¹
                            shadowBlur: 10,
                            shadowColor: '#4ade80'
                        },
                        lineStyle: {
                            color: '#00d4ff',  // äº®è“è‰²ï¼Œç§‘æŠ€æ„Ÿ
                            width: 3,
                            curveness: 0.2,
                            opacity: 0.8,
                            shadowBlur: 10,
                            shadowColor: '#00d4ff'
                        },
                        data: [
                            // å½¢æˆäº§ä¸šé“¾é—­ç¯ï¼šæˆéƒ½(ç ”å‘) â†’ ç»µé˜³(è£…å¤‡) â†’ ä¹å±±(åŒä½ç´ ) â†’ æ³¸å·(ä¸´åºŠ) â†’ æˆéƒ½
                            { coords: [[104.066, 30.572], [104.679, 31.467]] }, // æˆéƒ½ â†’ ç»µé˜³
                            { coords: [[104.679, 31.467], [103.761, 29.582]] }, // ç»µé˜³ â†’ ä¹å±±
                            { coords: [[103.761, 29.582], [105.443, 28.889]] }, // ä¹å±± â†’ æ³¸å·
                            { coords: [[105.443, 28.889], [104.066, 30.572]] }, // æ³¸å· â†’ æˆéƒ½
                            // æ·»åŠ äº¤å‰è¿çº¿ï¼Œå½¢æˆç½‘çŠ¶è¿æ¥
                            { coords: [[104.066, 30.572], [103.761, 29.582]] }, // æˆéƒ½ â†’ ä¹å±±
                            { coords: [[104.679, 31.467], [105.443, 28.889]] }  // ç»µé˜³ â†’ æ³¸å·
                        ]
                    },
                    // æ‰€æœ‰äº§ä¸šå›­æ•£ç‚¹ - æ˜¾ç¤ºæ ‡ç­¾ï¼ˆè“è‰²ç³»ï¼Œä¸æ–°åœ°å›¾ä¸€è‡´ï¼‰
                    {
                        name: 'æ ¸åŒ»ç–—äº§ä¸šå›­',
                        type: 'scatter',
                        coordinateSystem: 'geo',
                        data: scatterData,
                        symbolSize: function(val, params) {
                            // æ³¸å·ä½¿ç”¨æœ€å¤§çš„æ ‡è®°ï¼ˆçº¢è‰²çªå‡ºï¼‰
                            if (params.name === 'æ³¸å·') {
                                return 28;
                            }
                            // å…¶ä»–åŸå¸‚ä½¿ç”¨ç»Ÿä¸€å¤§å°
                            return 24;
                        },
                        itemStyle: {
                            color: function(params) {
                                // æ³¸å·ä½¿ç”¨çº¢è‰²
                                if (params.name === 'æ³¸å·') {
                                    return '#ff5252';
                                }
                                // å…¶ä»–åŸå¸‚ä½¿ç”¨è“è‰²ç³»
                                const blueColors = {
                                    'æˆéƒ½': '#2196f3',
                                    'ç»µé˜³': '#1976d2',
                                    'ä¹å±±': '#1565c0'
                                };
                                return blueColors[params.name] || '#42a5f5';
                            },
                            shadowBlur: 10,
                            shadowColor: function(params) {
                                return params.name === 'æ³¸å·' ? '#ff5252' : '#2196f3';
                            }
                        },
                        label: {
                            formatter: function(params) {
                                const roleMap = {
                                    'æ³¸å·': 'æ³¸å·\nä¸´åºŠè½¬åŒ–åº”ç”¨æ',
                                    'æˆéƒ½': 'æˆéƒ½\nç§‘æŠ€åˆ›æ–°æ',
                                    'ç»µé˜³': 'ç»µé˜³\nè£…å¤‡åˆ¶é€ æ',
                                    'ä¹å±±': 'ä¹å±±\nåŒä½ç´ ç”Ÿäº§æ'
                                };
                                return roleMap[params.name] || params.name;
                            },
                            position: 'right',
                            show: true,
                            color: '#fff',
                            fontSize: 11,
                            backgroundColor: function(params) {
                                // æ³¸å·ä½¿ç”¨çº¢è‰²èƒŒæ™¯
                                if (params.name === 'æ³¸å·') {
                                    return 'rgba(255, 82, 82, 0.8)';
                                }
                                // å…¶ä»–åŸå¸‚ä½¿ç”¨è“è‰²èƒŒæ™¯
                                return 'rgba(33, 150, 243, 0.8)';
                            },
                            padding: [6, 10],
                            borderRadius: 4,
                            lineHeight: 16
                        }
                    },
                    // æ³¸å·æ ¸å¿ƒäº§ä¸šå›­æ¶Ÿæ¼ªæ•ˆæœï¼ˆçº¢è‰²çªå‡ºï¼Œä¸æ–°åœ°å›¾ä¸€è‡´ï¼‰
                    {
                        name: 'æ ¸å¿ƒäº§ä¸šå›­',
                        type: 'effectScatter',
                        coordinateSystem: 'geo',
                        data: scatterData.filter(item => item.name === 'æ³¸å·'),
                        symbolSize: 32,
                        showEffectOn: 'render',
                        rippleEffect: {
                            brushType: 'stroke',
                            scale: 4.5,
                            period: 2.5
                        },
                        label: {
                            formatter: 'æ³¸å·\nä¸´åºŠè½¬åŒ–åº”ç”¨æ',
                            position: 'right',
                            show: true,
                            color: '#fff',
                            fontSize: 13,
                            fontWeight: 'bold',
                            backgroundColor: 'rgba(255, 82, 82, 0.9)',  // çº¢è‰²èƒŒæ™¯
                            padding: [8, 12],
                            borderRadius: 4,
                            lineHeight: 18,
                            borderColor: '#fff',
                            borderWidth: 1
                        },
                        itemStyle: {
                            color: '#ff5252',  // çº¢è‰²æ ‡è®°ç‚¹
                            shadowBlur: 20,
                            shadowColor: '#ff5252'  // çº¢è‰²é˜´å½±
                        }
                    }
                ]
            };

            console.log('åœ°å›¾é…ç½®å®Œæˆ,å‡†å¤‡åŠ è½½åœ°å›¾JSON...');

            // å¤šä¸ªåœ¨çº¿åœ°å›¾æ•°æ®æºï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
            const mapDataSources = [
                'https://geo.datav.aliyun.com/areas_v3/bound/510000_full.json',
                'https://cdn.jsdelivr.net/npm/echarts-map-china@1.0.0/provinces/sichuan.json',
                'https://unpkg.com/echarts-map-china@1.0.0/provinces/sichuan.json',
                'https://fastly.jsdelivr.net/npm/echarts-map-china@1.0.0/provinces/sichuan.json'
            ];

            let currentSourceIndex = 0;

            // æ™ºèƒ½åŠ è½½åœ°å›¾æ•°æ®å‡½æ•°ï¼ˆå¸¦è¶…æ—¶æ§åˆ¶ï¼‰
            function loadMapData() {
                if (currentSourceIndex >= mapDataSources.length) {
                    // æ‰€æœ‰åœ¨çº¿æºéƒ½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å¤‡ç”¨æ•°æ®
                    console.warn('âš ï¸ æ‰€æœ‰åœ¨çº¿åœ°å›¾æºå‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å¤‡ç”¨æ•°æ®');
                    try {
                        echarts.registerMap('sichuan', localSichuanMapData);
                        mapChart.setOption(option);
                        console.log('âœ… ä½¿ç”¨æœ¬åœ°å¤‡ç”¨åœ°å›¾æ•°æ®æ¸²æŸ“æˆåŠŸ');

                        // å¼ºåˆ¶é‡ç»˜
                        setTimeout(() => {
                            mapChart.resize();
                            console.log('åœ°å›¾å·²é‡ç»˜');
                        }, 100);
                    } catch (error) {
                        console.error('âŒ æœ¬åœ°åœ°å›¾æ•°æ®åŠ è½½å¤±è´¥:', error);
                        showMapError(error);
                    }
                    return;
                }

                const currentSource = mapDataSources[currentSourceIndex];
                console.log(`å°è¯•åŠ è½½åœ°å›¾æ•°æ®æº [${currentSourceIndex + 1}/${mapDataSources.length}]:`, currentSource);

                // æ·»åŠ è¶…æ—¶æ§åˆ¶
                const fetchTimeout = new Promise((_, reject) => {
                    setTimeout(() => reject(new Error('è¯·æ±‚è¶…æ—¶')), 5000);
                });

                const fetchData = fetch(currentSource)
                    .then(response => {
                        console.log('åœ°å›¾JSONå“åº”çŠ¶æ€:', response.status);

                        if (!response.ok) {
                            throw new Error(`HTTPé”™è¯¯! çŠ¶æ€: ${response.status}`);
                        }

                        return response.text();
                    })
                    .then(text => {
                        try {
                            const sichuanJson = JSON.parse(text);
                            console.log('âœ… åœ°å›¾JSONè§£ææˆåŠŸ');
                            console.log('æ•°æ®æº:', currentSource);
                            console.log('åœ°å›¾æ•°æ®ç±»å‹:', sichuanJson.type);
                            console.log('åœ°å›¾ç‰¹å¾æ•°é‡:', sichuanJson.features ? sichuanJson.features.length : 0);

                            echarts.registerMap('sichuan', sichuanJson);
                            mapChart.setOption(option);
                            console.log('âœ… å››å·çœåœ°å›¾æ¸²æŸ“æˆåŠŸ! æ˜¾ç¤º', scatterData.length, 'ä¸ªåŸå¸‚');

                            // å¼ºåˆ¶é‡ç»˜
                            setTimeout(() => {
                                mapChart.resize();
                                console.log('åœ°å›¾å·²é‡ç»˜');
                            }, 100);
                        } catch (parseError) {
                            console.error('âŒ JSONè§£æå¤±è´¥:', parseError);
                            throw new Error('åœ°å›¾æ•°æ®æ ¼å¼é”™è¯¯: ' + parseError.message);
                        }
                    });

                // ä½¿ç”¨Promise.raceå®ç°è¶…æ—¶
                Promise.race([fetchData, fetchTimeout])
                    .catch(error => {
                        console.warn(`âŒ æ•°æ®æº [${currentSourceIndex + 1}] åŠ è½½å¤±è´¥:`, error.message);
                        currentSourceIndex++;
                        loadMapData(); // å°è¯•ä¸‹ä¸€ä¸ªæ•°æ®æº
                    });
            }

            // å¼€å§‹åŠ è½½åœ°å›¾æ•°æ®
            console.log('å¼€å§‹åŠ è½½å››å·çœåœ°å›¾JSON...');
            loadMapData();

            // å“åº”å¼
            window.addEventListener('resize', () => {
                if (mapChart) {
                    mapChart.resize();
                }
            });
        }

        // è‡ªåŠ¨æ»šåŠ¨åŠŸèƒ½
        function initAutoScroll() {
            const cityList = document.getElementById('cityList');
            const transportScroll = document.getElementById('transportScroll');

            // ä¸ºåŸå¸‚åˆ—è¡¨æ·»åŠ ç‹¬ç«‹çš„è‡ªåŠ¨æ»šåŠ¨ï¼ˆä¸æ»šåŠ¨æ•´ä¸ªå·¦ä¾§åˆ—ï¼Œé¿å…é®æŒ¡é¡¶éƒ¨æ¿å—ï¼‰
            if (cityList) {
                console.log('ä¸ºåŸå¸‚åˆ—è¡¨æ·»åŠ è‡ªåŠ¨æ»šåŠ¨');
                autoScrollElement(cityList, 40); // ç¨æ…¢çš„é€Ÿåº¦ï¼Œ40px/ç§’
            }

            // ä¸ºäº¤é€šæ¢çº½æ¿å—æ·»åŠ ç‹¬ç«‹çš„è‡ªåŠ¨æ»šåŠ¨
            if (transportScroll) {
                console.log('ä¸ºäº¤é€šæ¢çº½æ¿å—æ·»åŠ è‡ªåŠ¨æ»šåŠ¨');
                autoScrollElement(transportScroll, 30); // æ›´æ…¢çš„é€Ÿåº¦ï¼Œ30px/ç§’
            }
        }

        function autoScrollElement(element, speed = 50) {
            let scrollInterval;
            let isPaused = false;

            // æ£€æŸ¥æ˜¯å¦éœ€è¦æ»šåŠ¨
            const needsScroll = element.scrollHeight > element.clientHeight;

            if (!needsScroll) {
                console.log('å†…å®¹æœªè¶…å‡ºï¼Œä¸éœ€è¦è‡ªåŠ¨æ»šåŠ¨');
                return; // å†…å®¹æœªè¶…å‡ºï¼Œä¸éœ€è¦æ»šåŠ¨
            }

            console.log('å¯åŠ¨è‡ªåŠ¨æ»šåŠ¨ï¼ŒscrollHeight:', element.scrollHeight, 'clientHeight:', element.clientHeight);

            // å¼€å§‹è‡ªåŠ¨æ»šåŠ¨
            function startScroll() {
                scrollInterval = setInterval(() => {
                    if (!isPaused) {
                        element.scrollTop += 1;

                        // æ»šåŠ¨åˆ°åº•éƒ¨åï¼Œå¹³æ»‘è¿”å›é¡¶éƒ¨
                        if (element.scrollTop >= element.scrollHeight - element.clientHeight) {
                            clearInterval(scrollInterval);
                            setTimeout(() => {
                                element.scrollTo({
                                    top: 0,
                                    behavior: 'smooth'
                                });
                                // è¿”å›é¡¶éƒ¨åé‡æ–°å¼€å§‹æ»šåŠ¨
                                setTimeout(startScroll, 1000);
                            }, 2000); // åœ¨åº•éƒ¨åœç•™2ç§’
                        }
                    }
                }, 1000 / speed); // æ ¹æ®é€Ÿåº¦è®¡ç®—é—´éš”
            }

            // é¼ æ ‡æ‚¬åœæ—¶æš‚åœ
            element.addEventListener('mouseenter', () => {
                isPaused = true;
            });

            // é¼ æ ‡ç§»å¼€æ—¶ç»§ç»­
            element.addEventListener('mouseleave', () => {
                isPaused = false;
            });

            startScroll();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', () => {
            console.log('é¡µé¢åŠ è½½å®Œæˆ');
            console.log('åŸå¸‚æ•°æ®æ•°é‡:', cities.length);
            renderCityList();
            console.log('å‡†å¤‡åˆå§‹åŒ–åœ°å›¾...');

            // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“åå†åˆå§‹åŒ–åœ°å›¾
            setTimeout(() => {
                console.log('å¼€å§‹åˆå§‹åŒ–åœ°å›¾ï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼‰');
                initMap();
            }, 1000);

            // å»¶è¿Ÿå¯åŠ¨è‡ªåŠ¨æ»šåŠ¨ï¼Œè®©æ•°æ®å…ˆåŠ è½½
            setTimeout(initAutoScroll, 2000);
        });

        // DOMå†…å®¹åŠ è½½å®Œæˆæ—¶ä¹Ÿå°è¯•åˆå§‹åŒ–ï¼ˆåŒé‡ä¿é™©ï¼‰
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMå†…å®¹åŠ è½½å®Œæˆ');

            // æ£€æŸ¥åœ°å›¾å®¹å™¨æ˜¯å¦å­˜åœ¨
            const mapContainer = document.getElementById('china-map');
            if (mapContainer) {
                console.log('åœ°å›¾å®¹å™¨å·²æ‰¾åˆ°');
            } else {
                console.error('åœ°å›¾å®¹å™¨æœªæ‰¾åˆ°!');
            }
        });

        // æ·»åŠ é”™è¯¯ç›‘å¬
        window.addEventListener('error', (e) => {
            console.error('é¡µé¢é”™è¯¯:', e.message, e.filename, e.lineno);
        });
    </script>
</body>
</html>
